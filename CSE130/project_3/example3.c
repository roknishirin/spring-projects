#include <pthread.h>
#include <stdio.h>
#include <unistd.h>
#include "dining.h"
#include "utils.h"
int main(void) {
dining_t* d2 = dining_init(4);
dining_t* d3 = dining_init(2);
student_t student3001 = make_student(3001, d3);
cleaning_t cleaning2001 = make_cleaning(2001, d2);
dining_t* d1 = dining_init(4);
student_t student3002 = make_student(3002, d3);
student_t student1001 = make_student(1001, d1);
pthread_create(&cleaning2001.thread, NULL, cleaning_enter, &cleaning2001);
student_t student1002 = make_student(1002, d1);
student_t student1003 = make_student(1003, d1);
pthread_join(cleaning2001.thread, NULL);
cleaning_t cleaning1001 = make_cleaning(1001, d1);
cleaning_t cleaning1002 = make_cleaning(1002, d1);
msleep(100);
pthread_create(&cleaning2001.thread, NULL, cleaning_leave, &cleaning2001);
student_t student3003 = make_student(3003, d3);
msleep(100);
pthread_join(cleaning2001.thread, NULL);
dining_destroy(&d2);
student_t student3004 = make_student(3004, d3);
student_t student3005 = make_student(3005, d3);
cleaning_t cleaning1003 = make_cleaning(1003, d1);
student_t student3006 = make_student(3006, d3);
cleaning_t cleaning3001 = make_cleaning(3001, d3);
pthread_create(&cleaning3001.thread, NULL, cleaning_enter, &cleaning3001);
pthread_join(cleaning3001.thread, NULL);
pthread_create(&student3001.thread, NULL, student_enter, &student3001);
cleaning_t cleaning1004 = make_cleaning(1004, d1);
pthread_create(&cleaning3001.thread, NULL, cleaning_leave, &cleaning3001);
cleaning_t cleaning1005 = make_cleaning(1005, d1);
cleaning_t cleaning1006 = make_cleaning(1006, d1);
cleaning_t cleaning1007 = make_cleaning(1007, d1);
pthread_create(&student1001.thread, NULL, student_enter, &student1001);
pthread_join(student1001.thread, NULL);
pthread_create(&student1001.thread, NULL, student_leave, &student1001);
pthread_join(student1001.thread, NULL);
pthread_create(&student3002.thread, NULL, student_enter, &student3002);
pthread_join(cleaning3001.thread, NULL);
msleep(100);
pthread_create(&student1002.thread, NULL, student_enter, &student1002);
pthread_join(student3001.thread, NULL);
pthread_join(student3002.thread, NULL);
pthread_create(&student3002.thread, NULL, student_leave, &student3002);
pthread_join(student3002.thread, NULL);
pthread_create(&student3003.thread, NULL, student_enter, &student3003);
pthread_create(&student1003.thread, NULL, student_enter, &student1003);
pthread_create(&student3004.thread, NULL, student_enter, &student3004);
pthread_create(&student3001.thread, NULL, student_leave, &student3001);
msleep(100);
pthread_join(student1002.thread, NULL);
pthread_join(student1003.thread, NULL);
msleep(100);
pthread_join(student3003.thread, NULL);
pthread_create(&student1003.thread, NULL, student_leave, &student1003);
pthread_join(student1003.thread, NULL);
pthread_join(student3004.thread, NULL);
pthread_join(student3001.thread, NULL);
pthread_create(&cleaning1001.thread, NULL, cleaning_enter, &cleaning1001);
pthread_create(&student3004.thread, NULL, student_leave, &student3004);
pthread_create(&student3003.thread, NULL, student_leave, &student3003);
pthread_create(&student1002.thread, NULL, student_leave, &student1002);
pthread_join(student3003.thread, NULL);
pthread_join(student1002.thread, NULL);
pthread_create(&student3005.thread, NULL, student_enter, &student3005);
msleep(100);
pthread_join(student3005.thread, NULL);
pthread_create(&student3006.thread, NULL, student_enter, &student3006);
pthread_join(cleaning1001.thread, NULL);
pthread_create(&cleaning1002.thread, NULL, cleaning_enter, &cleaning1002);
msleep(100);
msleep(100);
pthread_join(student3006.thread, NULL);
pthread_create(&cleaning1001.thread, NULL, cleaning_leave, &cleaning1001);
msleep(100);
pthread_join(student3004.thread, NULL);
pthread_join(cleaning1001.thread, NULL);
pthread_join(cleaning1002.thread, NULL);
pthread_create(&student3006.thread, NULL, student_leave, &student3006);
pthread_join(student3006.thread, NULL);
pthread_create(&student3005.thread, NULL, student_leave, &student3005);
pthread_join(student3005.thread, NULL);
pthread_create(&cleaning1002.thread, NULL, cleaning_leave, &cleaning1002);
msleep(100);
pthread_create(&cleaning1003.thread, NULL, cleaning_enter, &cleaning1003);
msleep(100);
pthread_join(cleaning1002.thread, NULL);
pthread_join(cleaning1003.thread, NULL);
pthread_create(&cleaning1004.thread, NULL, cleaning_enter, &cleaning1004);
dining_destroy(&d3);
pthread_create(&cleaning1003.thread, NULL, cleaning_leave, &cleaning1003);
pthread_join(cleaning1003.thread, NULL);
msleep(100);
pthread_join(cleaning1004.thread, NULL);
pthread_create(&cleaning1004.thread, NULL, cleaning_leave, &cleaning1004);
pthread_join(cleaning1004.thread, NULL);
msleep(100);
pthread_create(&cleaning1005.thread, NULL, cleaning_enter, &cleaning1005);
pthread_join(cleaning1005.thread, NULL);
pthread_create(&cleaning1006.thread, NULL, cleaning_enter, &cleaning1006);
pthread_create(&cleaning1005.thread, NULL, cleaning_leave, &cleaning1005);
msleep(100);
pthread_join(cleaning1005.thread, NULL);
pthread_join(cleaning1006.thread, NULL);
pthread_create(&cleaning1006.thread, NULL, cleaning_leave, &cleaning1006);
pthread_join(cleaning1006.thread, NULL);
pthread_create(&cleaning1007.thread, NULL, cleaning_enter, &cleaning1007);
pthread_join(cleaning1007.thread, NULL);
pthread_create(&cleaning1007.thread, NULL, cleaning_leave, &cleaning1007);
pthread_join(cleaning1007.thread, NULL);
msleep(100);
dining_destroy(&d1);
}
